/*******************************************************
 *  AUTOMATIC POETRY SENDER โ FOURTH POEM
 *  - Works with ChatGPT ProseMirror UI
 *  - Sends each FULL verse (ุตุฏุฑ + ุนุฌุฒ)
 *  - 20 seconds delay between messages
 *  - Stop any time: window.stopScript = true;
 *******************************************************/

window.stopScript = false;

const poem = [
"ุฃูููุง ุญูููู ุฑููุจูู ุซู ุญูููู ุงูููุทุงููุง    ููุฏ ูุงู ูุฃููุณูุง ูุฃูุตุจุญ ุฎุงููุง",
"ููุง ุนูููุฏู ุฅููุง ุฃูู ุชูุฐููููุฑู ุฃูู ุชูุฑูู    ุซูููุงููุง ุญููุงูููู ูููุตูุจ ุงูุฎูููู ุจุงููุง",
"ุฅููู ุงูููู ุฃูุดูู ุฃูููู ุจุงูุบูููุฑู ุญุงุฌุฉู    ูุฃูุฎุฑู ุฅูุฐุง ุฃูุจุตุฑุช ูุฌุฏูุง ุจูุฏูุง ููุง",
"ุฅูุฐุง ูุง ุฃูุฑุงุฏ ุงูุญู ุฃูู ูุชุฒุงูููุง    ูุญูุช ุฌููุงู ุงูุจูู ุญูุช ุฌูุงููุง",
"ุฃููุง ุฃูููุง ุงููุงุฏู ุงูุฐู ุถู ุณููู    ุฅููููุง ููู ุธููุงุกู ุญูููููุชู ูุงุฏูุง",
"ุชูุฎูุทููู ุฅููููุง ูู ุจุนูุฏ ุฎูุงูููุง    ูุฎูุถู ุฎูุฏุงุฑูููุง ูู ุงูููู ุฏุงุฌูุง",
"ูุธุฑุชู ุจูุฑูููุจูู ูุงูุธุนุงุฆู ุจุงููููููู    ูุทุงุฑุช ุจุฑูุจู ุดูุนุจุฉ ูู ูุคุงุฏูุง",
"ูุฅูููู ุฅูู ุชูุนูุทูู ููููุง ูุทุงู ูุง    ููุนุชู ูุญููุฃูุช ุงููููุจ ุงูุตูุงุฏูุง",
"ุฏูููููู ุนุชุงู ุงูุทูุฑ ููุฒุฌุฑ ุจุนุฏูุง    ุดูููุณููู ููููููููู ุงูุฎุฏูุฏ ุงูุนูุงุตูุง",
"ุชูุนููููุฑูู ุงูุฅูุฎูุงูู ูููู ูุฃูููุถูููุชู    ุนูู ูุตู ูููู ูููููุฉู ูู ุญุจุงููุง",
"ููุง ุฃูุจุตุฑ ุงููุงุฑู ุงูุชู ูุถุญุช ูู    ูุฑุงุกู ุฌููุงู ุงูุทูุฑ ุฅููุง ุชูุงุฑูุง",
"ููุญูููุชู ูุฃูุตุญุงุจู ุนูู ูู ุญูุฑููุฉู    ููุฑููุญ ุชูุจุงุฑูู ุงูุฃูุญูุจูุดูููู ุงููููุงุฑูููุง",
"ุชูุฑุงููููู ุจุงูุฃูุฌูุงุฒ ูู ูู ุตูููุตููู    ูุฃุฏููู ูู ุฎูููุฌู ุงูุจูุฑูู ุงูุฐูุงุฑูุง",
"ุฅูุฐุง ุจูููุบุช ุฑุญูู ุฑุฌูุนู ุฃููููุง    ูุฒูููู ุจูุงููููููุงุฉู ุซู ุงุฑุชุญุงููุง",
"ููุฎูููููุฉ ููููู ุนูู ุงูููู ุฑูููุจููุง    ููููุง ุจูุง ูุง ููุธุฑูู ุงูุชูุงููุง",
"ุชุฌูู ุจูุง ููุชู ุงูุดุฎุงุต ูุฃูููุง    ูุฐู ุบูุฑูู ููุถูุญูู ุจู ุงููุงุก ุทุงููุง",
"ูุดู ุนูู ุฐู ุงูุญูู ุฃูู ูุชุจุน ุงูููู    ููุฑุฌู ูู ุงูุฃููุตู ุงูุฐู ููุณ ูุงููุง",
"ููุงุฆู ุชุฑู ูู ุงูุญู ูู ุฐู ุตุฏุงูุฉ    ูุบููุฑุงูู ูุฏุนูู ููููููู ูู ุญูุฐูุงุฑูุง",
"ุฅูุฐุง ุฐููุฑุช ููุฏ ุฃุชูุญ ููู ุงูููู    ุนูู ูุง ุชุฑู ูู ููุฌุฑุชู ูุงุฌุชูุงุจูุง",
"ุฎูููููู ูููููุง ุฃูู ุชุธูุง ุจููู ุงูููู    ูููุช ุณูุนูุง ูู ุณููููุฉ ุฏุงุนูุง",
"ููุง ูุงุณูุนุง ุตูุช ุงูููุงุฏู ูุฅููู    ููุฑููุจู ููุง ุฏุงููุชู ุจุงูููุฏ ุฏูุงููุง",
"ุฃููุง ุทุฑูุช ุฃูุณูุงุกู ูุง ุญููู ููุทูุฑูู    ุฃูุญูููู ุนููุงููุง ูุฃูุดุนุซ ูุงุถูุง",
"ูุฏู ููุทูุฑูุงุช ุฅูุฐุง ูุง ุชูุบููููููุชู    ุจูุง ุงูุจูุฏ ุบุงููู ุงูุญูุฒููู ุงูููุงููุง",
"ููุญูููููุชู ูููู ุณูุงุฑู ุชูููููููู ููููููููุง    ููุฒุงุฑูุง ุนูู ุฐู ุญุงุฌุฉ ูุชุฑุงุฎูุง",
"ุฅูุฐุง ูุง ุฌูุนูุชู ุงูุณููููู ุจููู ูุจูููุง    ูุญุฑููุฉู ูููู ูุงูุนูููููู ุงูููุงููุง",
"ุฏุนูุชู ุฅููู ุฐู ุงูุนุฑุด ุฑุจูู ูุญูุฏ    ููููุฌูููุนู ุดุนุจูุง ุฃูู ููููุฑููุจู ูุงุฆููุง",
"ููุฃููุฑูู ุงูุนูุฐุงู ุฃูู ุฃูุบูุจ ุงูููู    ูุฃูู ุฃูุฎูููู ุงููุฌุฏู ุงูุฐู ููุณ ุฎุงููุง",
"ููุง ุญุณุฑุงุชู ุงูููุจ ูู ุฅูุซูุฑู ูู ููุฑู    ูุฑูุจูุงุ ูููููู ุฎูููุฑููู ููู ูุงุตูุง",
"ุชุนุฑุถุชู ูุงุณุชูุฑุฑุชู ูู ุฏูู ุญุงุฌุชู    ูุญุงูููู ุฅููู ููุณูุชูููุฑูู ูุญุงููุง",
"ููุฑูุฏููู ุฌููุงู ุงูุจููู ุซู ุชุญูููู    ููุง ูููู ูููู ูู ูููุงู ููุง ููุง",
"ูุฅููู ููููุบูุฑููุฑู ุฃูุนูููููู ุจุงูููููู    ููุงููู ุฃูุฑุฌู ุฃูู ูุงููู ูุงููุง",
"ููุงุฆูุฉู ูุงูุฏูุนู ููุญูุฏูุฑู ููุญููููุง    ุฃูุจุนูุฏู ุฌุฑูุฑ ุชูููุฑูููููู ุงูููุงููุง",
"ุจูุฃูููู ูุฌุงุฏ ุชุญูู ุงูุณููู ุจุนุฏูุง    ููุทูุนูุชู ุงููููู ูู ููุญููููู ูุงู ุจุงููุง",
"ุจุฃูู ุณููุงู ุชุทุนูู ุงูููู ุจุนุฏูุง    ูุฒุนุชู ุณููุงููุง ูู ููุงุชู ูุงุถูุง",
"ุฃููุง ูุง ุชุฎุงูุง ููุจูููุชูู ูู ูููููููุฉู    ูุฎุงูุง ุงูููุงูุง ุฃูู ุชููุชููุง ุจูุง",
"ููุฏ ููุชู ูุงุฑูุง ูุตุทูููุง ุนุฏููููู    ูุญูุฑูุฒูุง ููุง ุฃูููุฌูุฃูุชููู ูู ูุฑุงุฆูุง",
"ูุจุงุณูุทู ุฎูุฑ ููููู ุจููููู    ููุงุจูุถู ุดุฑ ุนูููู ุจุดูุงููุง",
"ูุฅููู ููุนูููู ุงูููุฑ ููุดูุชูุฑููู ุงูุบูููู    ุณูุฑููุนู -ุฅูุฐุง ูู ุฃูุฑุถ ุฏุงุฑู- ุงูุชูุงููุง",
"ุฌูุฑูููู ุงูุฌููุงู ูุง ุฃููุงู ูู ุงูุฑุฏู    ุฅูุฐุง ูุง ุฌุนูุช ุงูุณููู ูู ุนู ุดูุงููุง",
"ูููุณุช ูุณููู ูู ุงูุนุธุงู ุจููุฉู    ููููุณูููููู ุฃูุดูู ููููุนูุฉู ูู ูุณุงููุง"
];

let i = 0;

/************** INSERT TEXT INTO CHATGPT **************/
function writeMessage(text) {
    const editor = document.querySelector("#prompt-textarea");
    if (!editor) return alert("โ Input field (#prompt-textarea) not found.");

    editor.innerHTML = `<p>${text.replace(/\n/g,"<br>")}</p>`;
    editor.dispatchEvent(new Event("input", { bubbles: true }));
    editor.focus();
}

/************** CLICK SEND BUTTON **************/
function clickSend() {
    const btn = document.querySelector("#composer-submit-button");
    if (!btn) return alert("โ Send button not found (#composer-submit-button).");
    btn.click();
}

/************** WAIT FOR CHATGPT TO FINISH TYPING **************/
function waitForFinish(callback) {
    const observer = new MutationObserver(() => {
        const typing = document.querySelector("[data-testid='bot-typing']");
        if (!typing) {
            observer.disconnect();
            setTimeout(callback, 500);
        }
    });
    observer.observe(document.querySelector("main"), {
        childList: true,
        subtree: true
    });
}

/************** MAIN LOOP **************/
function run() {
    if (window.stopScript) {
        console.log("โ Script stopped.");
        return;
    }
    if (i >= poem.length) {
        console.log("๐ Done sending all verses!");
        return;
    }

    const msg = `ุงูุจูุช ุฑูู ${i + 1}:\n${poem[i]}`;
    console.log("โก๏ธ Sending:", msg);

    writeMessage(msg);

    setTimeout(() => {
        clickSend();
        waitForFinish(run);
    }, 20000); // 20 seconds

    i++;
}

/************** START **************/
run();
